# Attendees Spreadsheet Redesign — Summary

## Project Understanding

CatLab Drinks is a bar automation / POS system built with Laravel (backend) and Vue.js (frontend). It supports three frontend apps (Manage, POS, Client) sharing one Laravel backend with two API layers (Management API and Device API).

### Attendees Module
The attendees module allows event organisers to register "card aliases" with NFC cards and associate them with personal information (name, email). This is primarily used to link NFC cards to tokens generated by QuizWitz quiz software, enabling quizzers to spend credit from their NFC card without physically scanning it (for remote orders). The alias is a secret known only to the card owner, as it grants access to spending credit.

### Key Files
- **Model**: `app/Models/Attendee.php` — fields: `name`, `alias`, `email`, belongs to `Event`
- **Controller**: `app/Http/ManagementApi/V1/Controllers/AttendeeController.php` — uses Charon's `ChildCrudController` trait
- **Resource Definition**: `app/Http/ManagementApi/V1/ResourceDefinitions/AttendeeResourceDefinition.php` — defines API field visibility
- **Policy**: `app/Policies/AttendeePolicy.php` — authorization checks
- **Frontend Service**: `resources/shared/js/services/EventService.js` — API communication
- **Frontend View**: `resources/shared/js/views/Attendees.vue` — the spreadsheet UI

## Changes Made

### Backend
1. **AttendeeController**: Expanded route registration from `['index', 'view']` to `['index', 'view', 'store', 'edit', 'destroy']` to enable individual attendee CRUD operations.
2. **AttendeePolicy**: Fixed `view`, `edit`, and `destroy` methods that incorrectly referenced `MenuItem` instead of `Attendee` — changed parameter types to `Attendee` and accessed `$attendee->event` instead of `$menuItem->event`.

### Frontend
3. **EventService**: Added `createAttendee()`, `updateAttendee()`, and `deleteAttendee()` methods for individual attendee CRUD.
4. **Attendees.vue**: Completely redesigned from a single textarea to a spreadsheet-like editable table:
   - Loads existing attendees into a table on page load
   - Each row has editable input fields for alias, name, and email
   - Arrow key navigation (Up/Down) and Tab/Shift+Tab between cells
   - Enter moves to the next row
   - Copy-paste support from Excel/spreadsheets (detects tab-separated multi-cell data)
   - Delete and undo-delete buttons per row
   - Dirty tracking (highlights modified rows)
   - "Save changes" button that creates, updates, and deletes attendees as needed
   - Auto-adds empty rows at the bottom for new entries
   - Bulk import section preserved for replacing all attendees at once
   - Added informational section explaining how attendees/aliases work
   - Added link to QuizWitz.com as an example tool for generating aliases
